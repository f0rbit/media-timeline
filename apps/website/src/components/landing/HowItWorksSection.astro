---
type Step = {
	icon: "link" | "refresh" | "list";
	title: string;
	description: string;
};

const STEPS: Step[] = [
	{
		icon: "link",
		title: "Connect",
		description: "Link your accounts with secure OAuth or API tokens.",
	},
	{
		icon: "refresh",
		title: "Sync",
		description: "Background sync runs every 5 minutes. Always up to date.",
	},
	{
		icon: "list",
		title: "Browse",
		description: "Your unified timeline, organized and searchable.",
	},
];
---

<section class="how-it-works-section">
	<h3>How it works</h3>
	
	<div class="timeline-container">
		<div class="steps-row">
			{STEPS.map((step) => (
				<div class="step">
					<div class="step-dot">
						{step.icon === "link" && (
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
								<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
							</svg>
						)}
						{step.icon === "refresh" && (
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
								<path d="M21 3v5h-5" />
							</svg>
						)}
						{step.icon === "list" && (
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<rect width="7" height="7" x="3" y="3" rx="1" />
								<rect width="7" height="7" x="3" y="14" rx="1" />
								<path d="M14 4h7" />
								<path d="M14 9h7" />
								<path d="M14 15h7" />
								<path d="M14 20h7" />
							</svg>
						)}
					</div>
					<div class="step-content">
						<span class="step-title">{step.title}</span>
						<span class="step-description">{step.description}</span>
					</div>
				</div>
			))}
		</div>
	</div>
</section>

<style>
	.how-it-works-section {
		display: flex;
		flex-direction: column;
		gap: 16px;
		margin-top: 5rem;
	}

	.how-it-works-section h3 {
		text-align: center;
	}

	.timeline-container {
		position: relative;
	}

	.steps-row {
		display: flex;
		justify-content: space-between;
		position: relative;
	}

	/* Horizontal line connecting the dots */
	.steps-row::before {
		content: "";
		position: absolute;
		top: 16px;
		left: calc(16.67% + 16px);
		right: calc(16.67% + 16px);
		height: 1px;
		background: var(--input-border);
	}

	.step {
		flex: 1;
		display: flex;
		flex-direction: column;
		align-items: center;
		text-align: center;
		gap: 12px;
	}

	.step-dot {
		width: 32px;
		height: 32px;
		border-radius: 50%;
		border: 1px solid var(--input-border);
		background: var(--bg-primary);
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--text-muted);
		position: relative;
		z-index: 1;
	}

	.step-content {
		display: flex;
		flex-direction: column;
		gap: 4px;
		max-width: 200px;
	}

	.step-title {
		color: var(--text-primary);
		font-weight: 500;
	}

	.step-description {
		color: var(--text-tertiary);
		font-size: 0.875rem;
		line-height: 1.4;
	}

	@media (max-width: 768px) {
		.timeline-container {
			padding-left: 24px;
		}

		.steps-row {
			flex-direction: column;
			gap: 24px;
		}

		/* Vertical line on mobile */
		.steps-row::before {
			top: 16px;
			bottom: 16px;
			left: -9px;
			right: auto;
			width: 1px;
			height: auto;
		}

		.step {
			flex-direction: row;
			text-align: left;
			align-items: flex-start;
			gap: 16px;
		}

		.step-dot {
			flex-shrink: 0;
			margin-left: -40px;
		}

		.step-content {
			align-items: flex-start;
			max-width: none;
		}
	}
</style>
