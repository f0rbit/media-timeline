---
import Layout from "./Layout.astro";
import AuthStatus from "../components/solid/AuthStatus.tsx";

interface Props {
	title?: string;
	description?: string;
	ogImage?: string;
	noindex?: boolean;
}

const { title = "Media Timeline", description, ogImage, noindex } = Astro.props;

const pages = [
	{ name: "dashboard", href: "/dashboard" },
	{ name: "timeline", href: "/timeline" },
	{ name: "connections", href: "/connections" },
];

const currentPath = Astro.url.pathname;
const active = pages.find(p => currentPath.startsWith(p.href))?.name ?? "";
---

<Layout title={title} description={description} ogImage={ogImage} noindex={noindex}>
  <body>
    <div id="container">
      <header>
        <a href="/"><h5>media timeline</h5></a>
        <nav>
          {pages.map(p => (
            <a href={p.href} class={active === p.name ? "active" : ""}>
              {p.name}
            </a>
          ))}
          <AuthStatus client:load />
        </nav>
      </header>
      <main class="flex-col">
        <slot />
      </main>
    </div>
    <footer>
      <p class="description">media.devpad.tools</p>
    </footer>
  </body>
</Layout>

<style>
  main {
    margin-top: 24px;
  }
</style>
